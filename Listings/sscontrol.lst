


ARM Macro Assembler    Page 1 


    1 00000000                 AREA             |.text|, CODE, READONLY
    2 00000000                 EXPORT           check_sensor_change
    3 00000000                 PRESERVE8                    ; æ˜¾å¼å£°æ˜ä¿æŒ
                                                             8 å­—èŠ‚å¯¹é½
    4 00000000         
    5 00000000         ; å£°æ˜å¤–éƒ¨å‡½æ•°
    6 00000000                 IMPORT           CountSensor_Get
    7 00000000                 IMPORT           JQ8x00_Command_Data
    8 00000000         
    9 00000000         ; å£°æ˜å…¨å±€å˜é‡
   10 00000000                 IMPORT           sensor_cnt
   11 00000000                 IMPORT           sensor_cnt_last
   12 00000000                 IMPORT           isMentionWork
   13 00000000                 IMPORT           Num
   14 00000000         
   15 00000000         check_sensor_change
                               PROC
   16 00000000 B570            PUSH             {r4-r6, lr} ; ä¿å­˜å¯„å­˜å™¨å’
                                                            Œè¿”å›åœ°å€
   17 00000002 B081            SUB              SP, SP, #4  ; è°ƒæ•´æ ˆæŒ‡é’ˆï¼
                                                            Œç¡®ä¿ 8 å­—èŠ‚å¯¹
                                                            é½ï¼ˆ12+4=16å­—èŠ‚
                                                            ï¼‰
   18 00000004         
   19 00000004         ; sensor_cnt = CountSensor_Get();
   20 00000004 F7FF FFFE       BL               CountSensor_Get ; è°ƒç”¨å‡½æ•°ï
                                                            ¼Œè¿”å›å€¼åœ¨ r0
   21 00000008 4C0D            LDR              r4, =sensor_cnt 
                                                            ; r4 = &sensor_cnt
   22 0000000A 8020            STRH             r0, [r4]    ; sensor_cnt = r0 (
                                                            åŠå­—å­˜å‚¨)
   23 0000000C         
   24 0000000C         ; if (sensor_cnt != sensor_cnt_last)
   25 0000000C 4D0D            LDR              r5, =sensor_cnt_last ; r5 = &se
                                                            nsor_cnt_last
   26 0000000E 8829            LDRH             r1, [r5]    ; r1 = sensor_cnt_l
                                                            ast
   27 00000010 4288            CMP              r0, r1      ; æ¯”è¾ƒ sensor_cnt
                                                             å’Œ sensor_cnt_las
                                                            t
   28 00000012 D013            BEQ              end_if      ; å¦‚æœç›¸ç­‰ï¼Œè·
                                                            ³å‡º if åˆ†æ”¯
   29 00000014         
   30 00000014         ; isMentionWork = 0;
   31 00000014 4E0C            LDR              r6, =isMentionWork ; r6 = &isMe
                                                            ntionWork
   32 00000016 F04F 0200       MOV              r2, #0
   33 0000001A 7032            STRB             r2, [r6]    ; isMentionWork = 0
                                                             (å­—èŠ‚å­˜å‚¨)
   34 0000001C         
   35 0000001C         ; Num = 0;
   36 0000001C 4E0B            LDR              r6, =Num    ; r6 = &Num
   37 0000001E 8032            STRH             r2, [r6]    ; Num = 0 (åŠå­—å­
                                                            ˜å‚¨)
   38 00000020         
   39 00000020         ; JQ8x00_Command_Data(SetVolume, 10);
   40 00000020 F04F 0013       MOV              r0, #19     ; SetVolume = 19 (0
                                                            x13)
   41 00000024 F04F 010A       MOV              r1, #10     ; æ•°æ® = 10



ARM Macro Assembler    Page 2 


   42 00000028 F7FF FFFE       BL               JQ8x00_Command_Data
   43 0000002C         
   44 0000002C         ; JQ8x00_Command_Data(AppointTrack, 2);
   45 0000002C F04F 0007       MOV              r0, #7      ; AppointTrack = 7 
                                                            (0x07)
   46 00000030 F04F 0102       MOV              r1, #2      ; æ•°æ® = 2
   47 00000034 F7FF FFFE       BL               JQ8x00_Command_Data
   48 00000038         
   49 00000038         ; sensor_cnt_last = sensor_cnt;
   50 00000038 8820            LDRH             r0, [r4]    ; r0 = sensor_cnt
   51 0000003A 8028            STRH             r0, [r5]    ; sensor_cnt_last =
                                                             sensor_cnt
   52 0000003C         
   53 0000003C         end_if
   54 0000003C B001            ADD              SP, SP, #4  ; æ¢å¤æ ˆæŒ‡é’ˆ
   55 0000003E BD70            POP              {r4-r6, pc} ; æ¢å¤å¯„å­˜å™¨å¹
                                                            ¶è¿”å›
   56 00000040         
   57 00000040                 ENDP
   58 00000040                 END
              00000000 
              00000000 
              00000000 
              00000000 
Command Line: --debug --xref --diag_suppress=9931 --cpu=Cortex-M3 --apcs=interw
ork --depend=.\objects\sscontrol.d -o.\objects\sscontrol.o -I.\RTE\_Target_1 -I
E:\keil\ARM\PACK\Keil\STM32F1xx_DFP\2.2.0\Device\Include -IE:\keil\ARM\CMSIS\In
clude --predefine="__UVISION_VERSION SETA 524" --predefine="STM32F10X_MD SETA 1
" --list=.\listings\sscontrol.lst User\ssControl.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

.text 00000000

Symbol: .text
   Definitions
      At line 1 in file User\ssControl.s
   Uses
      None
Comment: .text unused
check_sensor_change 00000000

Symbol: check_sensor_change
   Definitions
      At line 15 in file User\ssControl.s
   Uses
      At line 2 in file User\ssControl.s
Comment: check_sensor_change used once
end_if 0000003C

Symbol: end_if
   Definitions
      At line 53 in file User\ssControl.s
   Uses
      At line 28 in file User\ssControl.s
Comment: end_if used once
3 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
External symbols

CountSensor_Get 00000000

Symbol: CountSensor_Get
   Definitions
      At line 6 in file User\ssControl.s
   Uses
      At line 20 in file User\ssControl.s
Comment: CountSensor_Get used once
JQ8x00_Command_Data 00000000

Symbol: JQ8x00_Command_Data
   Definitions
      At line 7 in file User\ssControl.s
   Uses
      At line 42 in file User\ssControl.s
      At line 47 in file User\ssControl.s

Num 00000000

Symbol: Num
   Definitions
      At line 13 in file User\ssControl.s
   Uses
      At line 36 in file User\ssControl.s
Comment: Num used once
isMentionWork 00000000

Symbol: isMentionWork
   Definitions
      At line 12 in file User\ssControl.s
   Uses
      At line 31 in file User\ssControl.s
Comment: isMentionWork used once
sensor_cnt 00000000

Symbol: sensor_cnt
   Definitions
      At line 10 in file User\ssControl.s
   Uses
      At line 21 in file User\ssControl.s
Comment: sensor_cnt used once
sensor_cnt_last 00000000

Symbol: sensor_cnt_last
   Definitions
      At line 11 in file User\ssControl.s
   Uses
      At line 25 in file User\ssControl.s
Comment: sensor_cnt_last used once
6 symbols
343 symbols in table
